<!doctype html>
<html>
  <head>
    <title>kinkade remote</title>
    <style>
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
  </head>
  <body>

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/lib/socket.io-stream.js"></script>

    <canvas id="canvas">

    <script>

      var socket = io();
      var canvas = document.getElementById('canvas');
      var ctx = canvas.getContext('2d');

      // var stream = ss.createStream();

      // socket.on('blatout', function(err, data){
      //     console.log('data:', data) // this works
      // });

      ss(socket).on('blatout', function(stream, data){
          // console.log('blatout received');
          stream.on('data', function(chunk) {
            // console.log('chunk:', chunk);

            var i = new ImageData(new Uint8ClampedArray(chunk),256,256);
            ctx.putImageData(i,0,0);

        });
      });


      socket.on('testout', function(err, data){
          console.log('stream:', stream);
          console.log('data', data);
          stream.pipe(console.log);
      });

      console.log('awake')

    </script>

  </body>
</html>
